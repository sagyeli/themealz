<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
  <h1 class="page-header">Meals:</h1>
  <div class="row">
    <div class="col-sm-3">
      <form class="meal-form">
        <label>Add or edit some more meals:</label>
        <p class="form-group">
          <label for="restaurant_selector">Select restaurant:</label>
          <select id="restaurant_selector" ng-model="newRestaurantId" ng-options="restaurant.name for restaurant in restaurants track by restaurant._id"></select>
        </p>
        <p class="form-group">
          <label for="meals_options_selector">Select meal options:</label>
          <select id="meals_options_selector" ng-model="newMealOptionsIds" ng-options="mealOption.name for mealOption in mealOptions track by mealOption._id" multiple></select>
        </p>
        <p class="form-group">
          <input type="text" class="form-control" placeholder="Add the price here" ng-model="newMealPrice">
        </p>
        <p class="form-group">
          <div class="checkbox">
            <label>
              <input type="checkbox" ng-model="newMealActive"> Is Active
            </label>
          </div>
        </p>
        <button type="submit" class="btn btn-primary" ng-click="addOrEditMeal()">{{ targetMeal ? 'Edit Meal Option' : 'Add New' }}</button>
      </form>
    </div>

    <div class="col-sm-9" style="max-height: 640px; overflow-y: auto;">
      <table class="table">
        <thead class="thead-default">
          <tr>
            <th>Restaurant Name</th>
            <th>Meal Options</th>
            <th>Price</th>
            <th>Is Active?</th>
            <th><a href="#" ng-click="onTargetMealChanged(null)">Clear Selection</a></th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="meal in meals" ng-click="onTargetMealChanged(meal)" ng-class="{ active: meal.selected }">
            <td>{{ getItemById(restaurants, meal.restaurant).name }}</td>
            <td>{{ pluck(getItemsByProperty(mealOptions, meal.mealOptions, '_id'), 'name').join(', ') }}</td>
            <td>{{ meal.price }}</td>
            <td>{{ meal.active }}</td>
            <td><button type="button" class="close" ng-click="deleteMeal(meal)">&times;</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<footer class="footer">
  <div class="container">
      <p>The Mealz v0.1</p>
  </div>
</footer>

